# План расширения игры "VX Racer"

Документ фиксирует, как внедрить три ключевых режима, предложенных ранее: карьеру, гонку на время и гараж с кастомизацией. Ориентирован на небольшую инди-команду.

## 1. Карьерный режим с прогрессией
- **Структура кампании:** линейная цепочка этапов или карта с развилками; каждый этап имеет цели (позиция, время круга, без столкновений) и награды.
- **Прогрессия игрока:** опыт/кредиты за гонки; разблокировка трасс, машин и улучшений по экономике кампании.
- **Сохранения:** сервис сохранений с текущей миссией, балансом и улучшениями; формат JSON/база; автосейв после гонки.
- **Гараж/магазин:** улучшения двигателя, шасси, шин и подвески с заметными изменениями управляемости; привязка к валюте из миссий.
- **UI:** экран кампании с картой этапов, условиями и призами; после финиша — экран результатов и кнопка продолжить/повторить.

## 2. Режим «Гонка на время»
- **Цель:** лучшее время круга/трассы. Настройки сложности и погоды фиксируются в попытке.
- **Фантом/призрак:** сохранение «ghost»-траекторий лучших попыток для ориентира; переключатель показа в меню.
- **Таблицы лидеров:** локальные результаты (файл/база) и опциональная онлайн-синхронизация через API; фильтры по трассе и машине.
- **UI:** экран выбора трассы и кнопка «Побить рекорд» из таблицы лидеров; отображение топа и личного лучшего.
- **Античит:** проверка целостности реплеев и версий билда, валидация параметров машины при отправке рекордов.

## 3. Гараж с визуальной кастомизацией
- **Экран гаража:** предпросмотр машины (вращение/зум), категории: окраски, винилы, диски, неон, спойлеры.
- **Система скинов:** пресеты, сохранение выбранного облика; совместимость с прогрессией и валютой.
- **Применение в гонке:** загрузка материалов/частей перед стартом; обязательные проверяемые параметры, чтобы косметика не влияла на физику.
- **Разблокировки:** достижения/миссии, дневные задания или сезонный пропуск; прозрачные требования в UI.
- **Монетизация (при необходимости):** только косметическая, без влияния на баланс.

## 4. Технические рекомендации
- **Данные:** хранить таблицы этапов, настроек трасс и конфигураций машин в отдельных JSON/Scriptable Objects; валидировать схемы.
- **События:** использовать событийную шину/observer для синхронизации UI с прогрессом, экономикой и гонкой.
- **Сетевые вызовы:** оборачивать API для лидербордов в отдельный сервис с ретраями и логированием.
- **Тестирование:** автотесты на сохранения, расчёт наград, сортировку таблиц и загрузку косметики; интеграционные тесты UI экранов кампании.
- **Производительность:** для гаража кешировать материалы/текстуры; для призраков — компактные записи позиция/время/руление.
